{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/aravshrimath/Documents/Mobile Application/touron-mobile-app/src/Screens/AccountScreens/BookingDetails.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport PDFReader from \"rn-pdf-reader-js\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { AuthContext } from \"../../context/AuthContext\";\nvar WIDTH = Dimensions.get(\"window\").width;\nvar HEIGHT = Dimensions.get(\"window\").height;\nimport * as firebase from \"firebase\";\n\nvar BookingDetails = function BookingDetails(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      uri = _useState4[0],\n      setUri = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      show = _useState6[0],\n      setShow = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      fileuri = _useState8[0],\n      setfileUri = _useState8[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  console.log(uri, \"uri\");\n\n  var _pickImage = function _pickImage() {\n    var result, response, blob;\n    return _regeneratorRuntime.async(function _pickImage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setShow(false);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(DocumentPicker.getDocumentAsync({\n              copyToCacheDirectory: true\n            }));\n\n          case 4:\n            result = _context.sent;\n\n            if (result.cancelled) {\n              _context.next = 14;\n              break;\n            }\n\n            setName(result.name);\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(fetch(result.uri));\n\n          case 9:\n            response = _context.sent;\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 12:\n            blob = _context.sent;\n            firebase.storage().ref(\"users/8wGFqFspRISgtNHAmpqO0iHPhvF2/docs/\" + result.name).put(blob).then(function () {\n              firebase.storage().ref(\"users/8wGFqFspRISgtNHAmpqO0iHPhvF2/docs/\" + result.name).getDownloadURL().then(function (imageUrl) {\n                setUri(imageUrl);\n                console.log(imageUrl, \"uploaded\");\n              });\n            }).catch(function (err) {\n              console.log(err);\n            });\n\n          case 14:\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](1);\n            console.log(_context.t0);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 16]], Promise);\n  };\n\n  return React.createElement(ScrollView, {\n    style: {\n      flex: 1,\n      backgroundColor: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, React.createElement(Button, {\n    title: \"pick pdf\",\n    onPress: function onPress() {\n      return _pickImage();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, name), React.createElement(TouchableOpacity, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, fileuri)), React.createElement(Button, {\n    title: \"Download\",\n    onPress: function onPress() {\n      return setShow(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), React.createElement(PDFReader, {\n    withPinchZoom: true,\n    onError: function onError(err) {\n      return console.log(err, \"err\");\n    },\n    style: {\n      height: 500,\n      width: WIDTH\n    },\n    noLoader: true,\n    source: {\n      uri: uri\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    marginTop: 25\n  },\n  pdf: {\n    flex: 1,\n    width: Dimensions.get(\"window\").width,\n    height: Dimensions.get(\"window\").height\n  }\n});\nexport default BookingDetails;","map":{"version":3,"sources":["/Users/aravshrimath/Documents/Mobile Application/touron-mobile-app/src/Screens/AccountScreens/BookingDetails.js"],"names":["React","useEffect","useState","useContext","PDFReader","DocumentPicker","AuthContext","WIDTH","Dimensions","get","width","HEIGHT","height","firebase","BookingDetails","navigation","name","setName","uri","setUri","show","setShow","fileuri","setfileUri","user","console","log","_pickImage","getDocumentAsync","copyToCacheDirectory","result","cancelled","fetch","response","blob","storage","ref","put","then","getDownloadURL","imageUrl","catch","err","flex","backgroundColor","styles","StyleSheet","create","container","justifyContent","alignItems","marginTop","pdf"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport {\n  View,\n  Dimensions,\n  ScrollView,\n  Image,\n  Button,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n} from \"react-native\";\nimport PDFReader from \"rn-pdf-reader-js\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { AuthContext } from \"../../context/AuthContext\";\nconst WIDTH = Dimensions.get(\"window\").width;\nconst HEIGHT = Dimensions.get(\"window\").height;\nimport * as firebase from \"firebase\";\n\nconst BookingDetails = ({ navigation }) => {\n  const [name, setName] = useState(\"\");\n  const [uri, setUri] = useState(\"\");\n  const [show, setShow] = useState(false);\n  const [fileuri, setfileUri] = useState(\"\");\n  const { user } = useContext(AuthContext);\n  console.log(uri, \"uri\");\n  const _pickImage = async () => {\n    setShow(false);\n    try {\n      let result = await DocumentPicker.getDocumentAsync({\n        copyToCacheDirectory: true,\n      });\n\n      if (!result.cancelled) {\n        setName(result.name);\n        const response = await fetch(result.uri);\n        const blob = await response.blob();\n        firebase\n          .storage()\n          .ref(`users/8wGFqFspRISgtNHAmpqO0iHPhvF2/docs/${result.name}`)\n          .put(blob)\n          .then(() => {\n            firebase\n              .storage()\n              .ref(`users/8wGFqFspRISgtNHAmpqO0iHPhvF2/docs/${result.name}`)\n              .getDownloadURL()\n              .then((imageUrl) => {\n                setUri(imageUrl);\n\n                console.log(imageUrl, \"uploaded\");\n              });\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  return (\n    <ScrollView\n      style={{\n        flex: 1,\n        backgroundColor: \"white\",\n      }}\n    >\n      <Button title=\"pick pdf\" onPress={() => _pickImage()} />\n      <Text>{name}</Text>\n      <TouchableOpacity>\n        <Text>{fileuri}</Text>\n      </TouchableOpacity>\n      <Button title=\"Download\" onPress={() => setShow(true)} />\n\n      {/* {show ? ( */}\n      <PDFReader\n        withPinchZoom={true}\n        onError={(err) => console.log(err, \"err\")}\n        style={{ height: 500, width: WIDTH }}\n        noLoader={true}\n        source={{\n          uri: uri,\n        }}\n      />\n      {/* ) : null} */}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    marginTop: 25,\n  },\n  pdf: {\n    flex: 1,\n    width: Dimensions.get(\"window\").width,\n    height: Dimensions.get(\"window\").height,\n  },\n});\n\nexport default BookingDetails;\n"]},"metadata":{},"sourceType":"module"}